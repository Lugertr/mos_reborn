<app-scroll-container>
  <table mat-table matSort [dataSource]="dataSource">
    <ng-container matColumnDef="doc_id">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let row">{{ row.doc_id }}</td>
    </ng-container>

    <ng-container matColumnDef="title">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>Заголовок</th>
      <td mat-cell *matCellDef="let row">{{ row.title }}</td>
    </ng-container>

    <ng-container matColumnDef="type_name">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>Тип</th>
      <td mat-cell *matCellDef="let row">{{ row.type_name ?? row.type_id }}</td>
    </ng-container>

    <ng-container matColumnDef="author">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>Автор</th>
      <td mat-cell *matCellDef="let row">
        {{ row.author_name ?? row.author }}
      </td>
    </ng-container>

    <ng-container matColumnDef="document_date">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>Дата</th>
      <td mat-cell *matCellDef="let row">
        {{
          row.document_date ? (row.document_date | date : "yyyy-MM-dd") : "-"
        }}
      </td>
    </ng-container>

    <ng-container matColumnDef="privacy">
      <th mat-header-cell mat-sort-header *matHeaderCellDef>Общедоступность</th>
      <td mat-cell *matCellDef="let row">
        @let isPublicDoc = isPublicDocument(row.privacy);
        <mat-icon
          [matTooltip]="
            isPublicDoc
              ? 'Этот документ общедоступен'
              : 'Этот документ не представлен в публичном доступе'
          "
        >
          {{ isPublicDoc ? "check" : "lock_person" }}
        </mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      [class.row-selected]="selected()?.doc_id === row.doc_id"
      (keydown.enter)="onRowClick(row)"
      (click)="onRowClick(row)"
      *matRowDef="let row; columns: displayedColumns"
      class="hover"
    ></tr>
  </table>
</app-scroll-container>
